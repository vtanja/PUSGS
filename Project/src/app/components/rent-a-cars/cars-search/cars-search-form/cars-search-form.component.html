<form [formGroup]="searchForm" (ngSubmit)="onFormSubmit()">
  <div class="row" style="padding-top: 4%;">
      <div class="col" formGroupName="location">
        <div class="row">
          <div class="wrap-input100">
                <div class="input-icons">
                <i class="fa fa-map-marker" style="margin-top:8px; margin-left:7px" aria-hidden="true"></i>
                <input  class="input100" formControlName="pickUpLocation"
                  type="text" name="username" placeholder="Pick up location..." type="text"
                    matInput [matAutocomplete]="auto">
              </div>
              <mat-autocomplete #auto="matAutocomplete">
                <mat-optgroup *ngFor="let group of pickUpLocationOptions | async" [label]="group.letter">
                  <mat-option style="height: fit-content;" *ngFor="let name of group.names" [value]="name">
                   <span>{{name}}</span>
                    </mat-option>
                </mat-optgroup>
                </mat-autocomplete>
            <span class="invalid-input-span" *ngIf="searchForm.get('location.pickUpLocation').invalid && searchForm.get('location.pickUpLocation').touched && searched">Pick up location is required</span>
          </div>
        </div>
        <div class="row">
          <div class="wrap-input100" >
            <div class="input-icons">
              <i class="fa fa-map-marker" style="margin-top:8px; margin-left:7px" aria-hidden="true"></i>
            <input formControlName="dropOffLocation"  class="input100"
             [matAutocomplete]="autoGroup" type="text" name="username"
              placeholder="Drop off location...">
            </div>
            <mat-autocomplete #autoGroup="matAutocomplete">
              <mat-optgroup *ngFor="let group of dropOffLocationOptions | async" [label]="group.letter">
                <mat-option *ngFor="let name of group.names" [value]="name">
                  {{name}}
                </mat-option>
                </mat-optgroup>
                </mat-autocomplete>
            <span class="invalid-input-span" *ngIf="searchForm.get('location.dropOffLocation').invalid && searchForm.get('location.dropOffLocation').touched && searched">Drop off location is required</span>
        </div>
      </div>
      </div>

      <div class="col" formGroupName="dates">
        <div class="row">
          <div class="wrap-input100" >
            <div class="input-icons">
              <div class="input-group">
                <input formControlName="pickUpDate" class="form-control date-input100"  placeholder="Pick up date..."
                      name="dp"  ngbDatepicker #p="ngbDatepicker">
                <div class="input-group-append append_style">
                  <button class="btn calendar"  (click)="p.toggle()" type="button"></button>
                </div>
                <i class="fa fa-calendar" aria-hidden="true"></i>
              </div>
            </div>
            <span class="invalid-input-span" *ngIf="searchForm.get('dates.pickUpDate').invalid && searchForm.get('dates.pickUpDate').touched && searched">Pick up date is required</span>
          </div>
        </div>
        <div class="row">
          <div class="wrap-input100" >
            <div class="input-icons">
              <div class="input-group">
                <input  formControlName="dropOffDate" readonly="readonly" class="form-control date-input100"  placeholder="Drop off date..."
                        aria-autocomplete="none" name="dp"  ngbDatepicker #d="ngbDatepicker">
                <div class="input-group-append append_style">
                  <button class="btn calendar"  (click)="d.toggle()" type="button"></button>
                </div>
                <i class="fa fa-calendar" aria-hidden="true"></i>
              </div>
            </div>
            <span class="invalid-input-span" *ngIf="searchForm.get('dates.dropOffDate').invalid && searchForm.get('dates.dropOffDate').touched && searched">Drop off date is required</span>
          </div>
        </div>
      </div>

      <div class="col" formGroupName="times">
        <div class="row">
          <div class="wrap-input100" >
            <div class="input-icons">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              <select formControlName="pickUpTime" name="pickUpTime" class="input100" >
                <option value="" disabled selected hidden>Pick up time...</option>
                <option *ngFor="let time of times" value="{{time}}">{{time}}</option>
              </select>
          </div>
          </div>
        </div>
        <div class="row">
          <div class="wrap-input100" >
            <div class="input-icons">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              <select formControlName="dropOffTime" name="dropOffTime" class="input100" >
                <option value="" disabled selected hidden>Drop off time...</option>
                <option *ngFor="let time of times" value="{{time}}">{{time}}</option>
              </select>
          </div>
          </div>
        </div>
      </div>

    <div class="col">
      <div class="row">
        <div class="wrap-input100" >
          <div class="input-icons">
            <i class="fa fa-car" aria-hidden="true"></i>
            <select formControlName="carBrand" name="carBrand" class="input100" >
              <option value="" disabled selected hidden>Car brand...</option>
              <option *ngFor="let car of cars" value={{car}}>{{car}}</option>
            </select>
        </div>

        </div>
      </div>
      <div class="row">
        <div class="wrap-input100" >
          <div class="input-icons">
            <i class="fa fa-users" aria-hidden="true"></i>
            <select formControlName="passengers" name="passengers" class="input100" >
              <option value="" disabled selected hidden>Passengers number...</option>
              <option *ngFor="let item of [].constructor(9); let i = index" value={{i+1}}>{{i+1}}</option>
            </select>
        </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row justify-content-center">
    <button class="button search_button"  [disabled]="searchForm.invalid">Search</button>
  </div>
</form>
